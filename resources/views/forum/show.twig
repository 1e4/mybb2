{% extends "layouts.base" %}
{% block title %}{{ forum.title }}{% endblock %}
{% block head %}
    <meta name="description" content="{{ forum.description }}" />
    <link rel="canonical" href="{{ url_route("forums.show", [forum.slug]) }}" />
{% endblock %}
{% block contents %}
		<article class="full-width">
			<header>
				<h1>{{ forum.title }}</h1>
				<p class="description">
					{{ forum.description }}
				</p>
			</header>
		   <section>
				{% if forum.children.count > 0 %}
					<h2 class="bold">Child Forums</h2>
					 <div class="forum-list thread-list">
						{% for forum in forum.children.toTree %}
						   <div class="forum">
								<div class="forum-info">
									<h3 class="forum-title"><a href="{{ url_route("forums.show", [forum.slug]) }}">{{ forum.title }}</a></h3>
									<p class="description">{{ forum.description }} </p>
									{% if forum.children.count > 0 %}
										{% for subforum in forum.children.toTree %}
											<ul class="subforums">
												<i class="fa fa-level-up"></i>
												<li><a href="{{ url_route("forums.show", [subforum.slug]) }}" class="subforum-title">{{ subforum.title }}</a></li>
											</ul>
										{% endfor %}
									{% endif %}
								</div>
							</div>
						{% else %}
							No Forums Found!
						{% endfor %}
					</div>
				{% endif %}
			</section>
		</article>
		{% if topics.count > 0 %}
			<h2>Topics</h2>
			<div class="page-controls">
				<a href="#" class="button secondary"><i class="fa fa-circle-o"></i><span class="text">Mark Read</span></a>
				<a href="#" class="button secondary"><i class="fa fa-plus"></i><span class="text">Follow</span></a>
				<a href="index.php?page=new-thread" class="button"><i class="fa fa-edit"></i><span class="text">Post Thread</span></a>
			</div>
			<section class="forum topic-list">
				<div class="sort-topics clearfix">
					<a href="#" class="sort-column primary-column-one">
						Topic Title
					</a>
					<a href="#" class="sort-column primary-column-two">
						Start Date
					</a>
					<a href="#" class="sort-column replies-column">
						Replies
					</a>
					<a href="#" class="sort-column latest-column">
						Latest Post <i class="fa fa-caret-down"></i>
					</a>
				</div>
				<div class="topics-container">
					{% for topic in topics %}
						<div class="topic">
							<div class="primary-column">
								<h3 class="topic-title">
									<a href="{{ url_route("topics.show", [topic.slug]) }}">{{ topic.title }}</a>
								</h3>
								<h4>First Post</h4>
								<p class="first-post">
									<!-- it should be change later -->
									<span class="post-author"><a href="index.php?page=thread">FÃ¡bio Maia</a></span>
									<a href="index.php?page=thread#latest" class="post-date" title="{{ topic.created_at }}">{{ topic.created_at }}</a>
								</p>
							</div>
							<div class="replies-column">
								<h4>Replies</h4>
								<!-- it should be change later -->
								<p class="thread-replies caption" title="450 replies &middot; {{ topic.views }} views">450</p>
							</div>
							<div class="latest-column">
								<h4>Latest</h4>
								<!-- it should be change later -->
								<a href="index.php?page=profile" class="avatar-profile-link" title="Go to JonathanP's profile"><img src="{{ asset('images/avatar.png') }}" alt="JonathanP's avatar" class="avatar" /></a>
								<p class="latest-post">
									<span class="post-author"><a href="index.php?page=thread">JonathanP</a></span>
									<a href="index.php?page=thread#latest" class="post-date" title="March 8, 2014 at 5:46 PM">Mar 8, 2014</a>
								</p>
							</div>
					{% else %}
						<li class="thread-list__error error error-no-results">No topics found!</li>
					{% endfor %}
				</ul>
			</section>
		{% endif %}
{% endblock %}