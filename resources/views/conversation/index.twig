{% extends "layouts.base" %}
{% block title %}Conversations{% endblock %}
{% block contents %}
		<div class="page-content">
			<header>
				<h1>Conversations</h1>
				<p class="description">
					Well, conversations
				</p>
			</header>

			<div class="page-controls">
				<div class="page-buttons">
					<a href="{{ url_route('conversations.compose') }}" class="button button--secondary"><i class="fa fa-pencil-square-o"></i><span class="text">Compose</span></a>
				</div>
			</div>

			<section>
				<div class="header">
					<span class="title">Title</span>
					<span class="last-message">Last Message</span>
				</div>
				{% for conversation in auth_user.conversations %}
					<div class="list">
						<div class="title">
							{% if conversation.isUnread %}
								(New)
							{% endif %}
							<a href="{{ url_route('conversations.read', [conversation.id]) }}">{{ conversation.title }}</a>
						</div>
						<div class="last-message">by {{ render_profile_link(conversation.lastMessage.author) }} {{ generate_time(conversation.lastMessage.created_at) }}</div>
					</div>
				{% else %}
					<div class="no-message">
						No Message :(
					</div>
				{% endfor %}
			</section>
		</div>
{% endblock %}
