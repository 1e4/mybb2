{"version":3,"sources":["other.js","cookie.js","spinner.js","modal.js","post.js","poll.js","quote.js","avatar.js"],"names":["getTooltipContent","element","targetElement","content","tipText","data","DATA_POWERTIP","tipObject","DATA_POWERTIPJQ","tipTarget","DATA_POWERTIPTARGET","$","isFunction","call","length","clone","html","escapeHTML","string","String","replace","s","entityMap","submitFormAsGet","id","newRoute","form","find","val","attr","submit","window","MyBB","Cookie","cookiePrefix","cookiePath","cookieDomain","init","Settings","this","get","name","cookie","set","value","expires","expire","Date","setTime","getTime","options","path","domain","unset","removeCookie","jQuery","Spinner","inProgresses","add","show","remove","hide","Modals","on","toggleModal","bind","prototype","event","preventDefault","target","nodeName","modalOpener","modalSelector","modalFind","modal","class","closeText","modalContent","parent","substring","appendTo","zIndex","stepper","hideShowPassword","Avatar","undefined","response","responseObject","CLOSE","always","Posts","togglePost","proxy","confirmDelete","hasClass","addClass","removeClass","confirm","Lang","Polls","optionElement","removeOption","click","addOption","change","toggleMaxOptionsInput","$addPollButton","toggleAddPoll","slideDown","timePicker","datetimepicker","format","lang","i18n","mybb","months","dayOfWeek","minDate","slideUp","num_options","$option","last","after","$parent","$me","$myParent","parents","setTimeout","fixOptionsName","Modernizr","touch","powerTip","placement","smartPlacement","i","each","me","is","isOrContains","node","container","parentNode","elementContainsSelection","el","sel","getSelection","rangeCount","getRangeAt","commonAncestorContainer","document","selection","type","createRange","parentElement","Quotes","multiQuoteButton","showQuoteBar","addQuotes","viewQuotes","removeQuotes","quickQuote","quickAddQuote","quoteAdd","quoteRemove","checkQuickQuote","quoteButtons","$post","$content","addQuote","text","hideQuickQuote","quotes","getQuotes","push","JSON","stringify","pid","trim","toString","showQuickQuote","range","rect","getBoundingClientRect","$elm","css","top","scrollY","outerHeight","left","scrollX","outerWidth","width","myQuotes","parse","key","quote","postId","parseInt","removed","$quoteBar","$textarea","ajax","url","posts","_token","method","done","json","error","substr","message","focus","close","postid","max-height","height","split","$quoteButton","next","dropAvatar","$avatarDrop","avatarDropUrl","Dropzone","autoDiscover","avatarDrop","acceptedFiles","clickable","paramName","thumbnailWidth","thumbnailHeight","uploadMultiple","previewTemplate","file","dataUrl","JcropUpdateInputs","c","$jcrop","x","y","x2","y2","w","h","parseJSON","xhr","responseText","needCrop","Jcrop","onChange","onSelect","post","success","avatar","dropit","submenuEl","triggerEl","removeAttr","closest","toggleClass","checked","checked_boxes","prop","autosize","&","<",">","\"","'","/"],"mappings":"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","file":"main.js","sourcesContent":["$('html').addClass('js');\r\n\r\n$(function () {\r\n\r\n\t$('.nojs').hide();\r\n\r\n\tif(Modernizr.touch)\r\n\t{\r\n\t\t$('.radio-buttons .radio-button, .checkbox-buttons .checkbox-button').click(function() {\r\n\r\n\t\t});\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$('span.icons i, a, .caption, time').powerTip({ placement: 's', smartPlacement: true });\r\n\t}\r\n\r\n\t$('.user-navigation__links, #main-menu').dropit({ submenuEl: 'div.dropdown' });\r\n\t$('.dropdown-menu').dropit({ submenuEl: 'ul.dropdown', triggerEl: 'span.dropdown-button' });\r\n\t$(\"input[type=number]\").stepper();\r\n\t$(\".password-toggle\").hideShowPassword(false, true);\r\n\r\n\t$('.clear-selection-posts a').click(function(event) {\r\n\t\tevent.preventDefault();\r\n\t\t$('.thread').find('input[type=checkbox]:checked').removeAttr('checked').closest(\".post\").removeClass(\"highlight\");\r\n\t\t$('.inline-moderation').removeClass('floating');\r\n\t});\r\n\r\n\t$('.clear-selection-threads a').click(function(event) {\r\n\t\tevent.preventDefault();\r\n\t\t$('.thread-list').find('input[type=checkbox]:checked').removeAttr('checked').closest(\".thread\").removeClass(\"highlight\");\r\n\t\t$('.checkbox-select.check-all').find('input[type=checkbox]:checked').removeAttr('checked');\r\n\t\t$('.inline-moderation').removeClass('floating');\r\n\t});\r\n\r\n\t$('.clear-selection-forums a').click(function(event) {\r\n\t\tevent.preventDefault();\r\n\t\t$('.forum-list').find('input[type=checkbox]:checked').removeAttr('checked').closest(\".forum\").removeClass(\"highlight\");\r\n\t\t$('.checkbox-select.check-all').find('input[type=checkbox]:checked').removeAttr('checked');\r\n\t\t$('.inline-moderation').removeClass('floating');\r\n\t});\r\n\r\n\t$(\"#search .search-button\").click(function(event) {\r\n\t\tevent.preventDefault();\r\n\t\t$(\"#search .search-container\").slideDown();\r\n\t});\r\n\r\n\t$(\".post :checkbox\").change(function() {\r\n\t\t$(this).closest(\".post\").toggleClass(\"highlight\", this.checked);\r\n\r\n\t\tvar checked_boxes = $('.highlight').length;\r\n\r\n\t\tif(checked_boxes == 1)\r\n\t\t{\r\n\t\t\t$('.inline-moderation').addClass('floating');\r\n\t\t}\r\n\r\n\t\tif(checked_boxes == 0)\r\n\t\t{\r\n\t\t\t$('.inline-moderation').removeClass('floating');\r\n\t\t}\r\n\r\n\t\t$('.inline-moderation .selection-count').text(' ('+checked_boxes+')')\r\n\t});\r\n\r\n\t$(\".thread .checkbox-select :checkbox\").change(function() {\r\n\t\t$(this).closest(\".thread\").toggleClass(\"highlight\", this.checked);\r\n\r\n\t\tvar checked_boxes = $('.highlight').length;\r\n\r\n\t\tif(checked_boxes == 1)\r\n\t\t{\r\n\t\t\t$('.inline-moderation').addClass('floating');\r\n\t\t}\r\n\r\n\t\tif(checked_boxes == 0)\r\n\t\t{\r\n\t\t\t$('.inline-moderation').removeClass('floating');\r\n\t\t}\r\n\r\n\t\t$('.inline-moderation .selection-count').text(' ('+checked_boxes+')')\r\n\t});\r\n\r\n\t$(\".forum .checkbox-select :checkbox\").change(function() {\r\n\t\t$(this).closest(\".forum\").toggleClass(\"highlight\", this.checked);\r\n\r\n\t\tvar checked_boxes = $('.highlight').length;\r\n\r\n\t\tif(checked_boxes == 1)\r\n\t\t{\r\n\t\t\t$('.inline-moderation').addClass('floating');\r\n\t\t}\r\n\r\n\t\tif(checked_boxes == 0)\r\n\t\t{\r\n\t\t\t$('.inline-moderation').removeClass('floating');\r\n\t\t}\r\n\r\n\t\t$('.inline-moderation .selection-count').text(' ('+checked_boxes+')');\r\n\t});\r\n\r\n\t$(\".checkbox-select.check-all :checkbox\").click(function() {\r\n\t\t$(this).closest('section').find('input[type=checkbox]').prop('checked', this.checked);\r\n\t\t$(this).closest('section').find('.checkbox-select').closest('.thread').toggleClass(\"highlight\", this.checked);\r\n\t\t$(this).closest('section').find('.checkbox-select').closest('.forum').toggleClass(\"highlight\", this.checked);\r\n\r\n\t\tvar checked_boxes = $('.highlight').length;\r\n\r\n\t\tif(checked_boxes >= 1)\r\n\t\t{\r\n\t\t\t$('.inline-moderation').addClass('floating');\r\n\t\t}\r\n\r\n\t\tif(checked_boxes == 0)\r\n\t\t{\r\n\t\t\t$('.inline-moderation').removeClass('floating');\r\n\t\t}\r\n\r\n\t\t$('.inline-moderation .selection-count').text(' ('+checked_boxes+')');\r\n\t});\r\n\r\n\tautosize($('.post textarea'));\r\n\r\n/*\t$('.post.reply textarea.editor, .form textarea.editor').sceditor({\r\n\t\tplugins: 'bbcode',\r\n\t\tstyle: 'js/vendor/sceditor/jquery.sceditor.default.min.css',\r\n\t\temoticonsRoot: 'assets/images/',\r\n\t\ttoolbar: 'bold,italic,underline|font,size,color,removeformat|left,center,right|image,link,unlink|emoticon,youtube|bulletlist,orderedlist|quote,code|source',\r\n\t\tresizeWidth: false,\r\n\t\tautofocus: false,\r\n\t\tautofocusEnd: false\r\n\t});*/\r\n});\r\n\r\n// Overwrite the powertip helper function - it's nearly the same\r\nfunction getTooltipContent(element) {\r\n\tvar tipText = element.data(DATA_POWERTIP),\r\n\t\ttipObject = element.data(DATA_POWERTIPJQ),\r\n\t\ttipTarget = element.data(DATA_POWERTIPTARGET),\r\n\t\ttargetElement,\r\n\t\tcontent;\r\n\r\n\tif (tipText) {\r\n\t\tif ($.isFunction(tipText)) {\r\n\t\t\ttipText = tipText.call(element[0]);\r\n\t\t}\r\n\t\tcontent = tipText;\r\n\t} else if (tipObject) {\r\n\t\tif ($.isFunction(tipObject)) {\r\n\t\t\ttipObject = tipObject.call(element[0]);\r\n\t\t}\r\n\t\tif (tipObject.length > 0) {\r\n\t\t\tcontent = tipObject.clone(true, true);\r\n\t\t}\r\n\t} else if (tipTarget) {\r\n\t\ttargetElement = $('#' + tipTarget);\r\n\t\tif (targetElement.length > 0) {\r\n\t\t\tcontent = targetElement.html();\r\n\t\t}\r\n\t}\r\n\r\n\t// Except we're escaping html\r\n\treturn escapeHTML(content);\r\n}\r\n\r\n// Source: http://stackoverflow.com/questions/24816/escaping-html-strings-with-jquery\r\n\r\nvar entityMap = {\r\n\t\"&\": \"&amp;\",\r\n\t\"<\": \"&lt;\",\r\n\t\">\": \"&gt;\",\r\n\t'\"': '&quot;',\r\n\t\"'\": '&#39;',\r\n\t\"/\": '&#x2F;'\r\n};\r\n\r\nfunction escapeHTML(string) {\r\n\tif(typeof string == 'string') {\r\n\t\treturn String(string).replace(/[&<>\"'\\/]/g, function (s) {\r\n\t\t\treturn entityMap[s];\r\n\t\t});\r\n\t}\r\n\r\n\treturn string;\r\n}\r\n\r\nfunction submitFormAsGet(id, newRoute) {\r\n\tvar form = $('#' + id);\r\n\tform.find(\"input[name=_token]\").val('');\r\n\r\n\tif(newRoute != null) {\r\n\t\tform.attr('action', newRoute);\r\n\t}\r\n\r\n\tform.attr('method', 'get').submit();\r\n\treturn false;\r\n}\r\n","(function ($, window) {\r\n\twindow.MyBB = window.MyBB || {};\r\n\r\n\twindow.MyBB.Cookie = {\r\n\t\tcookiePrefix: '',\r\n\t\tcookiePath: '/',\r\n\t\tcookieDomain: '',\r\n\r\n\t\tinit: function () {\r\n\t\t\tMyBB.Settings = MyBB.Settings || {};\r\n\t\t\tif (typeof MyBB.Settings.cookiePrefix != 'undefined') {\r\n\t\t\t\tthis.cookiePrefix = MyBB.Settings.cookiePrefix;\r\n\t\t\t}\r\n\t\t\tif (typeof MyBB.Settings.cookiePath != 'undefined') {\r\n\t\t\t\tthis.cookiePath = MyBB.Settings.cookiePath;\r\n\t\t\t}\r\n\t\t\tif (typeof MyBB.Settings.cookieDomain != 'undefined') {\r\n\t\t\t\tthis.cookieDomain = MyBB.Settings.cookieDomain;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tget: function (name) {\r\n\t\t\tthis.init();\r\n\r\n\t\t\tname = this.cookiePrefix + name;\r\n\t\t\treturn $.cookie(name);\r\n\t\t},\r\n\r\n\t\tset: function (name, value, expires) {\r\n\t\t\tthis.init();\r\n\r\n\t\t\tname = this.cookiePrefix + name;\r\n\t\t\tif (!expires) {\r\n\t\t\t\texpires = 157680000; // 5*365*24*60*60 => 5 years\r\n\t\t\t}\r\n\r\n\t\t\texpire = new Date();\r\n\t\t\texpire.setTime(expire.getTime() + (expires * 1000));\r\n\r\n\t\t\toptions = {\r\n\t\t\t\texpires: expire,\r\n\t\t\t\tpath: this.cookiePath,\r\n\t\t\t\tdomain: this.cookieDomain\r\n\t\t\t};\r\n\r\n\t\t\treturn $.cookie(name, value, options);\r\n\t\t},\r\n\r\n\t\tunset: function (name) {\r\n\t\t\tthis.init();\r\n\r\n\t\t\tname = this.cookiePrefix + name;\r\n\r\n\t\t\toptions = {\r\n\t\t\t\tpath: this.cookiePath,\r\n\t\t\t\tdomain: this.cookieDomain\r\n\t\t\t};\r\n\t\t\treturn $.removeCookie(name, options);\r\n\t\t}\r\n\t}\r\n})\r\n(jQuery, window);","(function ($, window) {\r\n\twindow.MyBB = window.MyBB || {};\r\n\r\n\twindow.MyBB.Spinner = {\r\n\t\tinProgresses: 0,\r\n\t\tadd: function () {\r\n\t\t\tthis.inProgresses++;\r\n\t\t\tif (this.inProgresses == 1) {\r\n\t\t\t\t$(\"#spinner\").show();\r\n\t\t\t}\r\n\t\t},\r\n\t\tremove: function () {\r\n\t\t\tthis.inProgresses--;\r\n\t\t\tif (this.inProgresses == 0) {\r\n\t\t\t\t$(\"#spinner\").hide();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n})\r\n(jQuery, window);","(function($, window) {\r\n    window.MyBB = window.MyBB || {};\r\n    \r\n\twindow.MyBB.Modals = function Modals()\r\n\t{\r\n\t\t$(\"*[data-modal]\").on(\"click\", this.toggleModal).bind(this);\r\n\t};\r\n\r\n\twindow.MyBB.Modals.prototype.toggleModal = function toggleModal(event) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\t// Check to make sure we're clicking the link and not a child of the link\r\n\t\tif(event.target.nodeName === \"A\")\r\n\t\t{\r\n\t\t\t// Woohoo, it's the link!\r\n\t\t\tvar modalOpener = event.target,\r\n\t\t\t\tmodalSelector = $(modalOpener).data(\"modal\"),\r\n\t\t\t\tmodalFind = $(modalOpener).data(\"modal-find\"),\r\n\t\t\t\tmodal = $('<div/>', {\r\n\t    \t\t\t\"class\": \"modal-dialog\",\r\n\t\t\t\t\tcloseText: ''\r\n\t\t\t\t}),\r\n\t\t\t\tmodalContent = \"\";\r\n\t\t} else {\r\n\t\t\t// Nope, it's one of those darn children.\r\n\t\t\tvar modalOpener = event.target,\r\n\t\t\t\tmodalSelector = $(modalOpener).parent().data(\"modal\"),\r\n\t\t\t\tmodalFind = $(modalOpener).data(\"modal-find\"),\r\n\t\t\t\tmodal = $('<div/>', {\r\n\t    \t\t\t\"class\": \"modal-dialog\",\r\n\t\t\t\t\tcloseText: ''\r\n\t\t\t\t}),\r\n\t\t\t\tmodalContent = \"\";\r\n\t\t}\r\n\r\n\t\tif (modalSelector.substring(0, 1) === \".\" || modalSelector.substring(0, 1) === \"#\") {\r\n\t\t\t// Assume using a local, existing HTML element.\r\n\t\t\tmodalContent = $(modalSelector).html();\r\n\t\t\tmodal.html(modalContent);\r\n\t\t\tmodal.appendTo(\"body\").modal({\r\n\t\t\t\tzIndex: 1000,\r\n\t\t\t\tcloseText: ''\r\n\t\t\t});\r\n\t\t\t$('.modalHide').hide();\r\n\t\t\t$(\"input[type=number]\").stepper();\r\n\t\t\t$(\".password-toggle\").hideShowPassword(false, true);\r\n\t\t\tnew window.MyBB.Avatar();\r\n\t\t} else {\r\n\t\t\t// Assume modal content is coming from an AJAX request\r\n\r\n\t\t\t// data-modal-find is optional, default to \"#content\"\r\n\t\t\tif (modalFind === undefined) {\r\n\t\t\t\tmodalFind = \"#content\";\r\n\t\t\t}\r\n\r\n\t\t\tMyBB.Spinner.add();\r\n\r\n\t\t\t$.get('/'+modalSelector, function(response) {\r\n\t\t\t\tvar responseObject = $(response);\r\n\r\n\t\t\t\tmodalContent = $(modalFind, responseObject).html();\r\n\t\t\t\tmodal.html(modalContent);\r\n\t\t\t\tmodal.appendTo(\"body\").modal({\r\n\t\t\t\t\tzIndex: 1000,\r\n\t\t\t\t\tcloseText: ''\r\n\t\t\t\t});\r\n\t\t\t\t$('.modalHide').hide();\r\n\t\t\t\t$(\"input[type=number]\").stepper();\r\n\t\t\t\t$(\".password-toggle\").hideShowPassword(false, true);\r\n\t\t\t\tnew window.MyBB.Avatar();\r\n\r\n\t\t\t\t// Remove modal after close\r\n\t\t\t\tmodal.on($.modal.CLOSE, function() {\r\n\t\t\t\t\t$(this).remove();\r\n\t\t\t\t})\r\n\t\t\t}).always(function() {\r\n\t\t\t\tMyBB.Spinner.remove();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t};\r\n    \r\n    var modals = new window.MyBB.Modals(); // TODO: put this elsewhere :)\r\n})(jQuery, window);","(function($, window) {\r\n    window.MyBB = window.MyBB || {};\r\n\r\n\twindow.MyBB.Posts = function Posts()\r\n\t{\r\n\t\t// Show and hide posts\r\n\t\t$(\".postToggle\").on(\"click\", this.togglePost).bind(this);\r\n\r\n\r\n\t\t// Confirm Delete\r\n\t\t$(\".delete a\").on(\"click\", $.proxy(this.confirmDelete, this));\r\n\t};\r\n\r\n\t// Show and hide posts\r\n\twindow.MyBB.Posts.prototype.togglePost = function togglePost(event) {\r\n\t\tevent.preventDefault();\r\n\t\t// Are we minimized or not?\r\n\t\tif($(event.target).hasClass(\"fa-minus\"))\r\n\t\t{\r\n\t\t\t// Perhaps instead of hide, apply a CSS class?\r\n\t\t\t$(event.target).parent().parent().parent().addClass(\"post--hidden\");\r\n\t\t\t// Make button a plus sign for expanding\r\n\t\t\t$(event.target).addClass(\"fa-plus\");\r\n\t\t\t$(event.target).removeClass(\"fa-minus\");\r\n\r\n\t\t} else {\r\n\t\t\t// We like this person again\r\n\t\t\t$(event.target).parent().parent().parent().removeClass(\"post--hidden\");\r\n\t\t\t// Just in case we change our mind again, show the hide button\r\n\t\t\t$(event.target).addClass(\"fa-minus\");\r\n\t\t\t$(event.target).removeClass(\"fa-show\");\r\n\t\t}\r\n\t};\r\n\r\n\t// Confirm Delete\r\n\twindow.MyBB.Posts.prototype.confirmDelete = function confirmDelete(event) {\r\n\t\treturn confirm(Lang.get('topic.confirmDelete'));\r\n\t};\r\n\r\n\tvar posts = new window.MyBB.Posts();\r\n\r\n})(jQuery, window);","(function($, window) {\r\n    window.MyBB = window.MyBB || {};\r\n    \r\n\twindow.MyBB.Polls = function Polls()\r\n\t{\r\n\t\tthis.optionElement = $('#option-simple').clone().attr('id', '').removeClass('hidden').addClass('poll-option').hide();\r\n\t\t$('#option-simple').remove();\r\n\r\n\t\tthis.removeOption($('#add-poll .poll-option'));\r\n\r\n\t\t$('#new-option').click($.proxy(this.addOption, this));\r\n\r\n\t\t$('#poll-maximum-options').hide();\r\n\r\n\t\t$('#poll-is-multiple').change($.proxy(this.toggleMaxOptionsInput, this)).change();\r\n\r\n\t\tvar $addPollButton = $(\"#add-poll-button\");\r\n\t\t$addPollButton.click($.proxy(this.toggleAddPoll, this));\r\n\t\tif($addPollButton.length) {\r\n\t\t\tif($('#add-poll-input').val() === '1') {\r\n\t\t\t\t$('#add-poll').slideDown();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.timePicker();\r\n\t};\r\n\r\n\twindow.MyBB.Polls.prototype.timePicker = function timePicker() {\r\n\t\t$('#poll-end-at').datetimepicker({\r\n\t\t\tformat: 'Y-m-d H:i:s',\r\n\t\t\tlang: 'mybb',\r\n\t\t\ti18n: {\r\n\t\t\t\tmybb: {\r\n\t\t\t\t\tmonths: [\r\n\t\t\t\t\t\tLang.get('general.months.january'),\r\n\t\t\t\t\t\tLang.get('general.months.february'),\r\n\t\t\t\t\t\tLang.get('general.months.march'),\r\n\t\t\t\t\t\tLang.get('general.months.april'),\r\n\t\t\t\t\t\tLang.get('general.months.may'),\r\n\t\t\t\t\t\tLang.get('general.months.june'),\r\n\t\t\t\t\t\tLang.get('general.months.july'),\r\n\t\t\t\t\t\tLang.get('general.months.august'),\r\n\t\t\t\t\t\tLang.get('general.months.september'),\r\n\t\t\t\t\t\tLang.get('general.months.october'),\r\n\t\t\t\t\t\tLang.get('general.months.november'),\r\n\t\t\t\t\t\tLang.get('general.months.december')\r\n\t\t\t\t\t],\r\n\t\t\t\t\tdayOfWeek: [\r\n\t\t\t\t\t\tLang.get('general.dayOfWeek.sun'),\r\n\t\t\t\t\t\tLang.get('general.dayOfWeek.mon'),\r\n\t\t\t\t\t\tLang.get('general.dayOfWeek.tue'),\r\n\t\t\t\t\t\tLang.get('general.dayOfWeek.wed'),\r\n\t\t\t\t\t\tLang.get('general.dayOfWeek.thu'),\r\n\t\t\t\t\t\tLang.get('general.dayOfWeek.fri'),\r\n\t\t\t\t\t\tLang.get('general.dayOfWeek.sat')\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tminDate: 0\r\n\t\t});\r\n\t};\r\n\r\n\twindow.MyBB.Polls.prototype.toggleAddPoll = function toggleAddPoll() {\r\n\t\tif($('#add-poll-input').val() === '1') {\r\n\t\t\t$('#add-poll-input').val(0);\r\n\t\t\t$('#add-poll').slideUp();\r\n\t\t} else {\r\n\t\t\t$('#add-poll-input').val(1);\r\n\t\t\t$('#add-poll').slideDown();\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\twindow.MyBB.Polls.prototype.addOption = function addOption(event) {\r\n\t\tvar num_options = $('#add-poll .poll-option').length;\r\n\t\tif(num_options >= 10) { // TODO: settings\r\n\t\t\talert(Lang.choice('poll.errorManyOptions', 10)); // TODO: JS Error\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar $option = this.optionElement.clone();\r\n\t\t$option.find('input').attr('name', 'option['+(num_options+1)+']');\r\n\t\t$('#add-poll .poll-option').last().after($option);\r\n\t\t$option.slideDown();\r\n\t\tthis.removeOption($option);\r\n\t\treturn false;\r\n\t};\r\n\r\n\twindow.MyBB.Polls.prototype.removeOption = function bindRemoveOption($parent) {\r\n\t\t$parent.find('.remove-option').click($.proxy(function(event) {\r\n\t\t\tvar $me = $(event.target),\r\n\t\t\t\t$myParent = $me.parents('.poll-option');\r\n\t\t\tif($('.poll-option').length <= 2) // TODO: settings\r\n\t\t\t{\r\n\t\t\t\talert(Lang.choice('poll.errorFewOptions', 2)); // TODO: JS Error\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t$myParent.slideUp(500);\r\n\r\n\t\t\tsetTimeout($.proxy(function() {\r\n\t\t\t\t$myParent.remove();\r\n\t\t\t\tthis.fixOptionsName();\r\n\t\t\t}, this), 500);\r\n\t\t}, this));\r\n\t\tif(!Modernizr.touch) {\r\n\t\t\t$parent.find('.remove-option').powerTip({ placement: 's', smartPlacement: true });\r\n\t\t}\r\n\t};\r\n\r\n\twindow.MyBB.Polls.prototype.fixOptionsName = function() {\r\n\t\tvar i = 0;\r\n\t\t$('#add-poll .poll-option').each(function() {\r\n\t\t\ti++;\r\n\t\t\t$(this).find('input').attr('name', 'option['+i+']');\r\n\t\t});\r\n\t};\r\n\r\n\twindow.MyBB.Polls.prototype.toggleMaxOptionsInput = function toggleMaxOptionsInput(event) {\r\n\t\tme = event.target;\r\n\t\tif($(me).is(':checked')) {\r\n\t\t\t$('#poll-maximum-options').slideDown();\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$('#poll-maximum-options').slideUp();\r\n\t\t}\r\n\t};\r\n\r\n\tvar polls = new window.MyBB.Polls();\r\n\r\n})(jQuery, window);","(function ($, window) {\r\n\twindow.MyBB = window.MyBB || {};\r\n\r\n\twindow.MyBB.Quotes = function Quotes() {\r\n\r\n\t\t// MultiQuote\r\n\t\t$(\".quote-button\").on(\"click\", this.multiQuoteButton.bind(this));\r\n\r\n\t\tthis.showQuoteBar();\r\n\r\n\t\t$(\".quote-bar__select\").on(\"click\", $.proxy(this.addQuotes, this));\r\n\t\t$(\".quote-bar__view\").on(\"click\", $.proxy(this.viewQuotes, this));\r\n\t\t$(\".quote-bar__deselect\").on(\"click\", $.proxy(this.removeQuotes, this));\r\n\r\n\t\t$('.quick-quote .fast').on('click', $.proxy(this.quickQuote, this));\r\n\t\t$('.quick-quote .add').on('click', $.proxy(this.quickAddQuote, this));\r\n\r\n\t\t$('.quote__select').on(\"click\", $.proxy(this.quoteAdd, this));\r\n\t\t$('.quote__remove').on(\"click\", $.proxy(this.quoteRemove, this));\r\n\t\t$(\"body\").on(\"mouseup\", $.proxy(this.checkQuickQuote, this));\r\n\r\n\t\tthis.quoteButtons();\r\n\t};\r\n\r\n\twindow.MyBB.Quotes.prototype.quickQuote = function quickQuote(event) {\r\n\t\tvar $me = $(event.target);\r\n\t\tif (!$me.hasClass('quick-quote')) {\r\n\t\t\t$me = $me.parents('.quick-quote');\r\n\t\t}\r\n\r\n\t\tvar $post = $me.parents('.post');\r\n\r\n\t\tif ($me.data('content')) {\r\n\t\t\t$content = $('<div/>');\r\n\t\t\t$content.html($me.data('content'));\r\n\t\t\tthis.addQuote($post.data('postid'), $post.data('type'), $content.text());\r\n\t\t}\r\n\t\tthis.hideQuickQuote();\r\n\t}\r\n\r\n\twindow.MyBB.Quotes.prototype.quickAddQuote = function quickAddQuote(event) {\r\n\t\tvar $me = $(event.target),\r\n\t\t\tquotes = this.getQuotes();\r\n\t\tif (!$me.hasClass('quick-quote')) {\r\n\t\t\t$me = $me.parents('.quick-quote');\r\n\t\t}\r\n\r\n\t\tvar $post = $me.parents('.post');\r\n\r\n\t\tif ($me.data('content')) {\r\n\t\t\t$content = $('<div/>');\r\n\t\t\t$content.html($me.data('content'));\r\n\t\t\tquotes.push({\r\n\t\t\t\t'id': $post.data('type') + '_' + $post.data('postid'),\r\n\t\t\t\t'data': $content.text()\r\n\t\t\t});\r\n\t\t\tMyBB.Cookie.set('quotes', JSON.stringify(quotes));\r\n\r\n\t\t\tthis.showQuoteBar();\r\n\t\t}\r\n\t\tthis.hideQuickQuote();\r\n\t}\r\n\r\n\twindow.MyBB.Quotes.prototype.checkQuickQuote = function checkQuickQuote(event) {\r\n\t\tvar $me = $(event.target);\r\n\t\tif ($me.hasClass('quick-quote') || $me.parents('.quick-quote').length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!$me.hasClass('post')) {\r\n\t\t\t$me = $me.parents('.post');\r\n\t\t}\r\n\r\n\t\tif ($me && $me.length) {\r\n\t\t\tvar pid = $me.data('postid');\r\n\r\n\t\t\tif ($.trim(window.getSelection().toString())) {\r\n\t\t\t\tif (elementContainsSelection($me.find('.post__body')[0])) {\r\n\t\t\t\t\tthis.showQuickQuote(pid);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.hideQuickQuote();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.hideQuickQuote();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.hideQuickQuote();\r\n\t\t}\r\n\t}\r\n\r\n\twindow.MyBB.Quotes.prototype.showQuickQuote = function showQuckQuote(pid) {\r\n\t\tvar selection = window.getSelection(),\r\n\t\t\trange = selection.getRangeAt(0),\r\n\t\t\trect = range.getBoundingClientRect();\r\n\t\t$elm = $(\"#post-\" + pid).find('.quick-quote').show().data('content', $.trim(window.getSelection().toString()));\r\n\t\t$elm.css({\r\n\t\t\t'top': (window.scrollY + rect.top - $elm.outerHeight() - 4) + 'px',\r\n\t\t\t'left': (window.scrollX + rect.left - (($elm.outerWidth() - rect.width) / 2)) + 'px'\r\n\t\t});\r\n\t}\r\n\r\n\twindow.MyBB.Quotes.prototype.hideQuickQuote = function () {\r\n\t\t$('.post .quick-quote').hide().data('content', '');\r\n\t}\r\n\r\n\twindow.MyBB.Quotes.prototype.getQuotes = function getQuotes() {\r\n\t\tvar quotes = MyBB.Cookie.get('quotes'),\r\n\t\t\tmyQuotes = [];\r\n\t\tif (!quotes) {\r\n\t\t\tquotes = [];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tquotes = JSON.parse(quotes);\r\n\t\t}\r\n\t\t$.each(quotes, function (key, quote) {\r\n\t\t\tif (quote != null) {\r\n\t\t\t\tmyQuotes.push(quote);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tMyBB.Cookie.set('quotes', JSON.stringify(myQuotes));\r\n\t\treturn myQuotes;\r\n\t};\r\n\r\n\t// MultiQuote\r\n\twindow.MyBB.Quotes.prototype.multiQuoteButton = function multiQuoteButton(event) {\r\n\t\tevent.preventDefault();\r\n\t\tvar $me = $(event.target);\r\n\t\tif (!$me.hasClass('quote-button')) {\r\n\t\t\t$me = $me.parents('.quote-button');\r\n\t\t}\r\n\t\tvar $post = $me.parents('.post');\r\n\r\n\t\tvar postId = parseInt($post.data('postid')),\r\n\t\t\ttype = $post.data('type'),\r\n\t\t\tquotes = this.getQuotes();\r\n\r\n\t\tif (postId) {\r\n\t\t\tvar removed = false;\r\n\t\t\t$.each(quotes, function(key, quote) {\r\n\t\t\t\tif(typeof quote != 'string') {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(quote == type + '_' + postId) {\r\n\t\t\t\t\tdelete quotes[key];\r\n\t\t\t\t\tremoved = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (!removed) {\r\n\t\t\t\tquotes.push(type + '_' + postId);\r\n\t\t\t\t$me.find('.quote-button__add').hide();\r\n\t\t\t\t$me.find('.quote-button__remove').show();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$me.find('.quote-button__add').show();\r\n\t\t\t\t$me.find('.quote-button__remove').hide();\r\n\t\t\t}\r\n\r\n\t\t\tMyBB.Cookie.set('quotes', JSON.stringify(quotes));\r\n\r\n\t\t\tthis.showQuoteBar();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\twindow.MyBB.Quotes.prototype.showQuoteBar = function showQuoteBar() {\r\n\t\tvar quotes = this.getQuotes();\r\n\r\n\t\tif (quotes.length) {\r\n\t\t\t$(\".quote-bar\").show();\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$(\".quote-bar\").hide();\r\n\t\t}\r\n\t};\r\n\r\n\twindow.MyBB.Quotes.prototype.addQuotes = function addQuotes() {\r\n\t\tvar quotes = this.getQuotes(),\r\n\t\t\t$quoteBar = $(\".quote-bar\"),\r\n\t\t\t$textarea = $($quoteBar.data('textarea'));\r\n\r\n\t\tMyBB.Spinner.add();\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: '/post/quotes',\r\n\t\t\tdata: {\r\n\t\t\t\t'posts': quotes,\r\n\t\t\t\t'_token': $quoteBar.parents('form').find('input[name=_token]').val()\r\n\t\t\t},\r\n\t\t\tmethod: 'POST'\r\n\t\t}).done(function (json) {\r\n\t\t\tif (json.error) {\r\n\t\t\t\talert(json.error);// TODO: js error\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar value = $textarea.val();\r\n\t\t\t\tif (value && value.substr(-2) != \"\\n\\n\") {\r\n\t\t\t\t\tif (value.substr(-1) != \"\\n\") {\r\n\t\t\t\t\t\tvalue += \"\\n\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvalue += \"\\n\";\r\n\t\t\t\t}\r\n\t\t\t\t$textarea.val(value + json.message).focus();\r\n\t\t\t}\r\n\t\t\t$.modal.close();\r\n\t\t}).always(function () {\r\n\t\t\tMyBB.Spinner.remove();\r\n\t\t});\r\n\r\n\t\t$quoteBar.hide();\r\n\t\tMyBB.Cookie.unset('quotes');\r\n\t\tthis.quoteButtons();\r\n\t\treturn false;\r\n\t};\r\n\r\n\twindow.MyBB.Quotes.prototype.addQuote = function addQuote(postid, type, content) {\r\n\t\tvar $textarea = $(\"#message\");\r\n\r\n\t\tMyBB.Spinner.add();\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: '/post/quotes',\r\n\t\t\tdata: {\r\n\t\t\t\t'posts': [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'id': type + '_' + postid,\r\n\t\t\t\t\t\t'data': content\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t'_token': $(\".quote-bar\").parents('form').find('input[name=_token]').val()\r\n\t\t\t},\r\n\t\t\tmethod: 'POST'\r\n\t\t}).done(function (json) {\r\n\t\t\tif (json.error) {\r\n\t\t\t\talert(json.error);// TODO: js error\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar value = $textarea.val();\r\n\t\t\t\tif (value && value.substr(-2) != \"\\n\\n\") {\r\n\t\t\t\t\tif (value.substr(-1) != \"\\n\") {\r\n\t\t\t\t\t\tvalue += \"\\n\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvalue += \"\\n\";\r\n\t\t\t\t}\r\n\t\t\t\t$textarea.val(value + json.message).focus();\r\n\t\t\t}\r\n\t\t}).always(function () {\r\n\t\t\tMyBB.Spinner.remove();\r\n\t\t});\r\n\r\n\t\tthis.hideQuickQuote();\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\twindow.MyBB.Quotes.prototype.viewQuotes = function viewQuotes() {\r\n\t\tMyBB.Spinner.add();\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: '/post/quotes/all',\r\n\t\t\tdata: {\r\n\t\t\t\t'posts': this.getQuotes(),\r\n\t\t\t\t'_token': $(\".quote-bar\").parents('form').find('input[name=_token]').val()\r\n\t\t\t},\r\n\t\t\tmethod: 'POST'\r\n\t\t}).done($.proxy(function (data) {\r\n\t\t\tvar modalContent = $(\"#content\", $(data)),\r\n\t\t\t\tmodal = $('<div/>', {\r\n\t\t\t\t\t\"class\": \"modal-dialog view-quotes\",\r\n\t\t\t\t\tcloseText: ''\r\n\t\t\t\t});\r\n\t\t\tmodalContent.find('.view-quotes__quotes').css({\r\n\t\t\t\t'max-height': ($(window).height()-250)+'px'\r\n\t\t\t});\r\n\t\t\tmodal.html(modalContent.html());\r\n\t\t\tmodal.appendTo(\"body\").modal({\r\n\t\t\t\tzIndex: 1000,\r\n\t\t\t\tcloseText: ''\r\n\t\t\t});\r\n\r\n\t\t\tif(Modernizr.touch)\r\n\t\t\t{\r\n\t\t\t\t$('.radio-buttons .radio-button, .checkbox-buttons .checkbox-button').click(function() {\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t$('span.icons i, a, .caption, time').powerTip({ placement: 's', smartPlacement: true });\r\n\t\t\t}\r\n\r\n\t\t\t$('.quote__select').on(\"click\", $.proxy(this.quoteAdd, this));\r\n\t\t\t$('.quote__remove').on(\"click\", $.proxy(this.quoteRemove, this));\r\n\t\t\t$(\".select-all-quotes\").on(\"click\", $.proxy(this.addQuotes, this));\r\n\t\t\t$('.modal-hide').hide();\r\n\t\t}, this)).always(function () {\r\n\t\t\tMyBB.Spinner.remove();\r\n\t\t});\r\n\r\n\t\tthis.hideQuickQuote();\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\twindow.MyBB.Quotes.prototype.removeQuotes = function removeQuotes() {\r\n\t\t$quoteBar = $(\".quote-bar\");\r\n\t\t$quoteBar.hide();\r\n\t\tMyBB.Cookie.unset('quotes');\r\n\t\tthis.quoteButtons();\r\n\t\treturn false;\r\n\t};\r\n\r\n\twindow.MyBB.Quotes.prototype.quoteButtons = function quoteButtons() {\r\n\t\tvar quotes = this.getQuotes();\r\n\r\n\t\t$('.quote-button__add').show();\r\n\t\t$('.quote-button__remove').hide();\r\n\r\n\t\t$.each(quotes, function (key, quote) {\r\n\t\t\tif (typeof quote != 'string') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tquote = quote.split('_');\r\n\t\t\ttype = quote[0];\r\n\t\t\tpostId = parseInt(quote[1]);\r\n\t\t\tvar $quoteButton = $(\"#post-\" + postId + \"[data-type='\" + type + \"']\").find('.quoteButton');\r\n\t\t\t$quoteButton.find('.quote-button__add').hide();\r\n\t\t\t$quoteButton.find('.quote-button__remove').show();\r\n\t\t})\r\n\t}\r\n\r\n\twindow.MyBB.Quotes.prototype.quoteAdd = function quoteAdd(event) {\r\n\t\tvar $me = $(event.target),\r\n\t\t\t$post = $me.parents('.content-quote'),\r\n\t\t\t$textarea = $(\"#message\"),\r\n\t\t\tquotes = this.getQuotes();\r\n\r\n\t\tvar value = $textarea.val();\r\n\t\tif (value && value.substr(-2) != \"\\n\\n\") {\r\n\t\t\tif (value.substr(-1) != \"\\n\") {\r\n\t\t\t\tvalue += \"\\n\";\r\n\t\t\t}\r\n\t\t\tvalue += \"\\n\";\r\n\t\t}\r\n\t\t$textarea.val(value + $post.data('quote')).focus();\r\n\r\n\t\tdelete quotes[$post.data('id')];\r\n\t\tMyBB.Cookie.set('quotes', JSON.stringify(quotes));\r\n\t\t$post.slideUp('fast');\r\n\r\n\t\tif(this.getQuotes().length == 0) {\r\n\t\t\t$.modal.close();\r\n\t\t}\r\n\r\n\t\twhile($post.next().length) {\r\n\t\t\t$post = $post.next();\r\n\t\t\t$post.data('id', $post.data('id')-1);\r\n\t\t}\r\n\r\n\t\tthis.quoteButtons();\r\n\t\tthis.showQuoteBar();\r\n\t}\r\n\r\n\twindow.MyBB.Quotes.prototype.quoteRemove = function quoteRemove(event) {\r\n\t\tvar $me = $(event.target),\r\n\t\t\t$post = $me.parents('.content-quote'),\r\n\t\t\tquotes = this.getQuotes();\r\n\r\n\t\tdelete quotes[$post.data('id')];\r\n\t\tMyBB.Cookie.set('quotes', JSON.stringify(quotes));\r\n\t\t$post.slideUp('fast');\r\n\r\n\t\tif(this.getQuotes().length == 0) {\r\n\t\t\t$.modal.close();\r\n\t\t}\r\n\r\n\t\twhile($post.next().length) {\r\n\t\t\t$post = $post.next();\r\n\t\t\t$post.data('id', $post.data('id')-1);\r\n\t\t}\r\n\r\n\t\tthis.quoteButtons();\r\n\t\tthis.showQuoteBar();\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar quotes = new window.MyBB.Quotes();\r\n\r\n\r\n\t// Helper functions\r\n\t// http://stackoverflow.com/questions/8339857\r\n\tfunction isOrContains(node, container) {\r\n\t\twhile (node) {\r\n\t\t\tif (node === container) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tnode = node.parentNode;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction elementContainsSelection(el) {\r\n\t\tvar sel;\r\n\t\tif (window.getSelection) {\r\n\t\t\tsel = window.getSelection();\r\n\t\t\tif (sel.rangeCount > 0) {\r\n\t\t\t\tfor (var i = 0; i < sel.rangeCount; ++i) {\r\n\t\t\t\t\tif (!isOrContains(sel.getRangeAt(i).commonAncestorContainer, el)) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else if ((sel = document.selection) && sel.type != \"Control\") {\r\n\t\t\treturn isOrContains(sel.createRange().parentElement(), el);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n})\r\n(jQuery, window);","(function ($, window) {\r\n\twindow.MyBB = window.MyBB || {};\r\n\r\n\twindow.MyBB.Avatar = function Avatar() {\r\n\t\tthis.dropAvatar();\r\n\t};\r\n\r\n\twindow.MyBB.Avatar.prototype.dropAvatar = function dropAvatar()\r\n\t{\r\n\t\tvar $avatarDrop = $('#avatar-drop');\r\n\t\tif ($avatarDrop.length == 0 || $avatarDrop.is(':visible') == $('#avatar-drop-area').is(':visible')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar avatarDropUrl = $avatarDrop.attr('action');\r\n\t\tDropzone.autoDiscover = false;\r\n\t\tvar avatarDrop = new Dropzone(\"#avatar-drop\", {\r\n\t\t\turl: avatarDropUrl + \"?ajax=1\",\r\n\t\t\tacceptedFiles: \"image/*\",\r\n\t\t\tclickable: '#file-input',\r\n\t\t\tparamName: \"avatar_file\",\r\n\t\t\tthumbnailWidth: null,\r\n\t\t\tthumbnailHeight: null,\r\n\t\t\tuploadMultiple: false,\r\n\t\t\tinit: function () {\r\n\t\t\t\t$(\"#avatar-drop-area\").show();\r\n\t\t\t},\r\n\t\t\tpreviewTemplate: '<div style=\"display:none\" />'\r\n\t\t});\r\n\r\n\t\tavatarDrop.on(\"thumbnail\", function (file, dataUrl) {\r\n\t\t\t$(\"#crop\").find('.jcrop').find('img').attr('src', dataUrl);//TODO: use better selection\r\n\t\t});\r\n\r\n\t\tavatarDrop.on(\"sending\", function (file) {\r\n\t\t\tMyBB.Spinner.add();\r\n\t\t});\r\n\t\tavatarDrop.on(\"complete\", function () {\r\n\t\t\tMyBB.Spinner.remove();\r\n\t\t});\r\n\t\tavatarDrop.on(\"success\", function (file) {\r\n\t\t\tvar data = $.parseJSON(file.xhr.responseText);\r\n\t\t\tif (data.needCrop == true) {\r\n\t\t\t\t$(\"<a />\").data('modal', '#crop').click((new MyBB.Modals()).toggleModal).click(); // TODO: create a method in modal.js for it\r\n\t\t\t\tvar $jcrop = $('.modal').find('.jcrop');\r\n\r\n\t\t\t\tfunction JcropUpdateInputs(c) {\r\n\t\t\t\t\t$jcrop.find('.jcrop-x').val(c.x);\r\n\t\t\t\t\t$jcrop.find('.jcrop-y').val(c.y);\r\n\t\t\t\t\t$jcrop.find('.jcrop-x2').val(c.x2);\r\n\t\t\t\t\t$jcrop.find('.jcrop-y2').val(c.y2);\r\n\t\t\t\t\t$jcrop.find('.jcrop-w').val(c.w);\r\n\t\t\t\t\t$jcrop.find('.jcrop-h').val(c.h);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$jcrop.find('img').Jcrop({\r\n\t\t\t\t\tonChange: JcropUpdateInputs,\r\n\t\t\t\t\tonSelect: JcropUpdateInputs\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$('.modal').find('.crop-img').click(function () {\r\n\t\t\t\t\tMyBB.Spinner.add();\r\n\t\t\t\t\t$.post('/account/avatar/crop?ajax=1', {\r\n\t\t\t\t\t\tx: $jcrop.find('.jcrop-x').val(),\r\n\t\t\t\t\t\ty: $jcrop.find('.jcrop-y').val(),\r\n\t\t\t\t\t\tx2: $jcrop.find('.jcrop-x2').val(),\r\n\t\t\t\t\t\ty2: $jcrop.find('.jcrop-y2').val(),\r\n\t\t\t\t\t\tw: $jcrop.find('.jcrop-w').val(),\r\n\t\t\t\t\t\th: $jcrop.find('.jcrop-h').val(),\r\n\t\t\t\t\t\t\"_token\": $('input[name=\"_token\"]').val()\r\n\t\t\t\t\t}).done(function (data) {\r\n\t\t\t\t\t\tif (data.success) {\r\n\t\t\t\t\t\t\talert(data.message); // TODO: JS Message\r\n\t\t\t\t\t\t\t$.modal.close();\r\n\t\t\t\t\t\t\t$(\".my-avatar\").attr('src', data.avatar);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\talert(data.error);// TODO: JS Error\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).always(function () {\r\n\t\t\t\t\t\tMyBB.Spinner.remove();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tvar avatar = new window.MyBB.Avatar();\r\n\r\n})(jQuery, window);"],"sourceRoot":"/source/"}